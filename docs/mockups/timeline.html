<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Timeline Interactive - Travel Book</title>
  <link rel="stylesheet" href="design-system.css">
  <style>
    body {
      background: var(--color-background);
      overflow: hidden;
    }

    .timeline-container {
      height: 100vh;
      display: grid;
      grid-template-rows: auto 1fr auto;
    }

    /* Header */
    .timeline-header {
      background: white;
      padding: var(--spacing-lg) var(--spacing-xl);
      border-bottom: 1px solid var(--color-border);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .trip-info {
      display: flex;
      align-items: center;
      gap: var(--spacing-lg);
    }

    .trip-title {
      font-size: var(--font-size-2xl);
      font-weight: var(--font-weight-bold);
      color: var(--color-text-primary);
    }

    .trip-dates {
      font-size: var(--font-size-sm);
      color: var(--color-text-secondary);
    }

    /* Main Content */
    .timeline-main {
      display: grid;
      grid-template-columns: 1fr 400px;
      overflow: hidden;
    }

    /* Map Side */
    .map-container {
      position: relative;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
    }

    .map-placeholder {
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: var(--font-size-3xl);
      background-image: 
        radial-gradient(circle, rgba(255,255,255,0.1) 1px, transparent 1px);
      background-size: 30px 30px;
    }

    .route-line {
      position: absolute;
      width: 100%;
      height: 100%;
      pointer-events: none;
    }

    .map-markers {
      position: absolute;
      inset: 0;
    }

    .map-marker {
      position: absolute;
      width: 50px;
      height: 50px;
      border-radius: var(--radius-full);
      background: white;
      border: 4px solid var(--color-primary);
      cursor: pointer;
      transition: all var(--transition-base);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: var(--font-weight-bold);
      box-shadow: var(--shadow-xl);
    }

    .map-marker:hover {
      transform: scale(1.2);
      z-index: 10;
      box-shadow: var(--shadow-2xl);
    }

    .map-marker.active {
      background: var(--color-primary);
      color: white;
      transform: scale(1.3);
      z-index: 20;
    }

    .marker-tooltip {
      position: absolute;
      bottom: 100%;
      left: 50%;
      transform: translateX(-50%) translateY(-8px);
      background: var(--color-text-primary);
      color: white;
      padding: var(--spacing-xs) var(--spacing-md);
      border-radius: var(--radius-md);
      font-size: var(--font-size-sm);
      white-space: nowrap;
      opacity: 0;
      pointer-events: none;
      transition: opacity var(--transition-fast);
    }

    .map-marker:hover .marker-tooltip,
    .map-marker.active .marker-tooltip {
      opacity: 1;
    }

    /* Timeline Side */
    .timeline-sidebar {
      background: var(--color-surface);
      display: flex;
      flex-direction: column;
      border-left: 1px solid var(--color-border);
    }

    .timeline-controls {
      padding: var(--spacing-lg);
      border-bottom: 1px solid var(--color-border);
      background: white;
    }

    .playback-controls {
      display: flex;
      align-items: center;
      gap: var(--spacing-md);
      margin-bottom: var(--spacing-md);
    }

    .play-button {
      width: 50px;
      height: 50px;
      border-radius: var(--radius-full);
      background: linear-gradient(135deg, var(--color-primary), var(--color-primary-dark));
      color: white;
      border: none;
      cursor: pointer;
      font-size: var(--font-size-xl);
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: var(--shadow-md);
      transition: all var(--transition-base);
    }

    .play-button:hover {
      transform: scale(1.1);
      box-shadow: var(--shadow-lg);
    }

    .progress-info {
      flex: 1;
    }

    .progress-label {
      font-size: var(--font-size-sm);
      color: var(--color-text-secondary);
      margin-bottom: var(--spacing-xs);
    }

    .progress-bar-container {
      height: 8px;
      background: var(--color-border);
      border-radius: var(--radius-full);
      overflow: hidden;
      cursor: pointer;
    }

    .progress-bar {
      height: 100%;
      background: linear-gradient(90deg, var(--color-primary), var(--color-secondary));
      border-radius: var(--radius-full);
      transition: width var(--transition-base);
    }

    .timeline-filters {
      display: flex;
      gap: var(--spacing-sm);
      flex-wrap: wrap;
    }

    .filter-chip {
      padding: var(--spacing-xs) var(--spacing-md);
      border-radius: var(--radius-full);
      border: 2px solid var(--color-border);
      background: white;
      font-size: var(--font-size-sm);
      cursor: pointer;
      transition: all var(--transition-fast);
    }

    .filter-chip:hover {
      border-color: var(--color-primary);
    }

    .filter-chip.active {
      background: var(--color-primary);
      color: white;
      border-color: var(--color-primary);
    }

    /* Steps List */
    .steps-list {
      flex: 1;
      overflow-y: auto;
      padding: var(--spacing-lg);
    }

    .step-card {
      background: white;
      border-radius: var(--radius-xl);
      padding: var(--spacing-lg);
      margin-bottom: var(--spacing-md);
      cursor: pointer;
      transition: all var(--transition-base);
      border: 2px solid transparent;
      position: relative;
    }

    .step-card:hover {
      border-color: var(--color-primary-light);
      transform: translateX(4px);
      box-shadow: var(--shadow-md);
    }

    .step-card.active {
      border-color: var(--color-primary);
      background: linear-gradient(to right, rgba(255, 107, 107, 0.05), white);
      box-shadow: var(--shadow-lg);
    }

    .step-number {
      position: absolute;
      top: var(--spacing-lg);
      left: calc(-1 * var(--spacing-lg));
      width: 30px;
      height: 30px;
      border-radius: var(--radius-full);
      background: var(--color-primary);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: var(--font-weight-bold);
      font-size: var(--font-size-sm);
      box-shadow: var(--shadow-md);
    }

    .step-header {
      display: flex;
      align-items: flex-start;
      gap: var(--spacing-md);
      margin-bottom: var(--spacing-md);
    }

    .step-thumbnail {
      width: 80px;
      height: 60px;
      border-radius: var(--radius-md);
      object-fit: cover;
      flex-shrink: 0;
    }

    .step-info {
      flex: 1;
    }

    .step-title {
      font-size: var(--font-size-lg);
      font-weight: var(--font-weight-semibold);
      color: var(--color-text-primary);
      margin-bottom: var(--spacing-xs);
    }

    .step-date {
      font-size: var(--font-size-sm);
      color: var(--color-text-secondary);
      display: flex;
      align-items: center;
      gap: var(--spacing-xs);
    }

    .step-summary {
      font-size: var(--font-size-sm);
      color: var(--color-text-secondary);
      line-height: var(--line-height-relaxed);
      margin-top: var(--spacing-sm);
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    .step-meta {
      display: flex;
      gap: var(--spacing-md);
      margin-top: var(--spacing-md);
      padding-top: var(--spacing-md);
      border-top: 1px solid var(--color-border-light);
    }

    .meta-item {
      display: flex;
      align-items: center;
      gap: var(--spacing-xs);
      font-size: var(--font-size-xs);
      color: var(--color-text-tertiary);
    }

    /* Bottom Stats Bar */
    .stats-bar {
      background: white;
      border-top: 1px solid var(--color-border);
      padding: var(--spacing-md) var(--spacing-xl);
      display: flex;
      gap: var(--spacing-2xl);
    }

    .stat-item {
      display: flex;
      align-items: center;
      gap: var(--spacing-md);
    }

    .stat-icon {
      width: 40px;
      height: 40px;
      border-radius: var(--radius-md);
      background: linear-gradient(135deg, var(--color-primary-light), var(--color-primary));
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: var(--font-size-lg);
    }

    .stat-content {
      display: flex;
      flex-direction: column;
    }

    .stat-value {
      font-size: var(--font-size-xl);
      font-weight: var(--font-weight-bold);
      color: var(--color-text-primary);
    }

    .stat-label {
      font-size: var(--font-size-xs);
      color: var(--color-text-secondary);
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    /* Animations */
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .step-card {
      animation: fadeInUp 0.3s ease-out;
    }

    @keyframes pulse-marker {
      0%, 100% {
        box-shadow: 0 0 0 0 rgba(255, 107, 107, 0.7);
      }
      50% {
        box-shadow: 0 0 0 20px rgba(255, 107, 107, 0);
      }
    }

    .map-marker.active {
      animation: pulse-marker 2s infinite;
    }

    /* Responsive */
    @media (max-width: 992px) {
      .timeline-main {
        grid-template-columns: 1fr;
      }
      
      .map-container {
        display: none;
      }
    }
  </style>
</head>
<body>
  <div class="timeline-container">
    <!-- Header -->
    <header class="timeline-header">
      <div class="trip-info">
        <div>
          <div class="trip-title">🇸🇮 Mon voyage en Slovénie</div>
          <div class="trip-dates">15 mai - 26 mai 2024 • 12 jours</div>
        </div>
      </div>
      <div style="display: flex; gap: var(--spacing-md);">
        <button class="btn btn-outline btn-sm">📥 Exporter</button>
        <button class="btn btn-primary btn-sm">✏️ Éditer</button>
      </div>
    </header>

    <!-- Main Content -->
    <main class="timeline-main">
      <!-- Map Side -->
      <div class="map-container">
        <div class="map-placeholder">
          🗺️ Carte Interactive
        </div>
        <div class="map-markers">
          <div class="map-marker active" style="top: 30%; left: 40%;">
            1
            <div class="marker-tooltip">Ljubljana</div>
          </div>
          <div class="map-marker" style="top: 35%; left: 38%;">
            2
            <div class="marker-tooltip">Predjama</div>
          </div>
          <div class="map-marker" style="top: 25%; left: 42%;">
            3
            <div class="marker-tooltip">Lac de Bled</div>
          </div>
          <div class="map-marker" style="top: 20%; left: 35%;">
            4
            <div class="marker-tooltip">Parc du Triglav</div>
          </div>
          <div class="map-marker" style="top: 50%; left: 35%;">
            5
            <div class="marker-tooltip">Piran</div>
          </div>
        </div>
      </div>

      <!-- Timeline Side -->
      <aside class="timeline-sidebar">
        <div class="timeline-controls">
          <div class="playback-controls">
            <button class="play-button" onclick="togglePlayback()">▶</button>
            <div class="progress-info">
              <div class="progress-label">Étape 1 sur 5</div>
              <div class="progress-bar-container" onclick="seekTo(event)">
                <div class="progress-bar" id="progressBar" style="width: 20%;"></div>
              </div>
            </div>
          </div>
          <div class="timeline-filters">
            <div class="filter-chip active">🌍 Tout</div>
            <div class="filter-chip">🏔️ Nature</div>
            <div class="filter-chip">🏰 Culture</div>
            <div class="filter-chip">🍽️ Gastronomie</div>
          </div>
        </div>

        <div class="steps-list">
          <!-- Step 1 -->
          <div class="step-card active" onclick="selectStep(this, 0)">
            <div class="step-number">1</div>
            <div class="step-header">
              <img class="step-thumbnail" src="https://images.unsplash.com/photo-1608408891486-f5cade977d19?w=200" alt="Ljubljana">
              <div class="step-info">
                <div class="step-title">🏔️ Ljubljana</div>
                <div class="step-date">📅 15-16 mai 2024</div>
              </div>
            </div>
            <div class="step-summary">
              Capitale verdoyante et animée, Ljubljana séduit par son architecture baroque,
              ses ponts élégants et son château perché...
            </div>
            <div class="step-meta">
              <div class="meta-item">📸 12 photos</div>
              <div class="meta-item">⏱️ 2 jours</div>
              <div class="meta-item">🚶 8 km</div>
            </div>
          </div>

          <!-- Step 2 -->
          <div class="step-card" onclick="selectStep(this, 1)">
            <div class="step-number">2</div>
            <div class="step-header">
              <img class="step-thumbnail" src="https://images.unsplash.com/photo-1566073771259-6a8506099945?w=200" alt="Predjama">
              <div class="step-info">
                <div class="step-title">🏰 Château de Predjama</div>
                <div class="step-date">📅 17 mai 2024</div>
              </div>
            </div>
            <div class="step-summary">
              Château médiéval spectaculaire construit dans une falaise de 123 mètres.
              Une architecture unique au monde...
            </div>
            <div class="step-meta">
              <div class="meta-item">📸 8 photos</div>
              <div class="meta-item">⏱️ 1 jour</div>
              <div class="meta-item">🚗 45 km</div>
            </div>
          </div>

          <!-- Step 3 -->
          <div class="step-card" onclick="selectStep(this, 2)">
            <div class="step-number">3</div>
            <div class="step-header">
              <img class="step-thumbnail" src="https://images.unsplash.com/photo-1582719366115-5f30c17efaa8?w=200" alt="Lac de Bled">
              <div class="step-info">
                <div class="step-title">🌊 Lac de Bled</div>
                <div class="step-date">📅 18-20 mai 2024</div>
              </div>
            </div>
            <div class="step-summary">
              Joyau des Alpes slovènes avec son île pittoresque et son église au clocher
              emblématique. Eau turquoise cristalline...
            </div>
            <div class="step-meta">
              <div class="meta-item">📸 24 photos</div>
              <div class="meta-item">⏱️ 3 jours</div>
              <div class="meta-item">🚶 15 km</div>
            </div>
          </div>

          <!-- Step 4 -->
          <div class="step-card" onclick="selectStep(this, 3)">
            <div class="step-number">4</div>
            <div class="step-header">
              <img class="step-thumbnail" src="https://images.unsplash.com/photo-1533929736458-ca588d08c8be?w=200" alt="Triglav">
              <div class="step-info">
                <div class="step-title">⛰️ Parc National du Triglav</div>
                <div class="step-date">📅 21-24 mai 2024</div>
              </div>
            </div>
            <div class="step-summary">
              Randonnées dans les Alpes juliennes, vallées glaciaires et cascades
              spectaculaires. Nature préservée à l'état pur...
            </div>
            <div class="step-meta">
              <div class="meta-item">📸 31 photos</div>
              <div class="meta-item">⏱️ 4 jours</div>
              <div class="meta-item">🥾 42 km</div>
            </div>
          </div>

          <!-- Step 5 -->
          <div class="step-card" onclick="selectStep(this, 4)">
            <div class="step-number">5</div>
            <div class="step-header">
              <img class="step-thumbnail" src="https://images.unsplash.com/photo-1560969184-10fe8719e047?w=200" alt="Piran">
              <div class="step-info">
                <div class="step-title">🏖️ Piran</div>
                <div class="step-date">📅 25-26 mai 2024</div>
              </div>
            </div>
            <div class="step-summary">
              Perle de la côte adriatique slovène, Piran enchante par ses ruelles
              vénitiennes, sa place Tartini et ses couchers de soleil...
            </div>
            <div class="step-meta">
              <div class="meta-item">📸 15 photos</div>
              <div class="meta-item">⏱️ 2 jours</div>
              <div class="meta-item">🚗 120 km</div>
            </div>
          </div>
        </div>
      </aside>
    </main>

    <!-- Stats Bar -->
    <footer class="stats-bar">
      <div class="stat-item">
        <div class="stat-icon">📸</div>
        <div class="stat-content">
          <div class="stat-value">90</div>
          <div class="stat-label">Photos</div>
        </div>
      </div>
      <div class="stat-item">
        <div class="stat-icon" style="background: linear-gradient(135deg, var(--color-secondary-light), var(--color-secondary));">🚗</div>
        <div class="stat-content">
          <div class="stat-value">425</div>
          <div class="stat-label">Kilomètres</div>
        </div>
      </div>
      <div class="stat-item">
        <div class="stat-icon" style="background: linear-gradient(135deg, var(--color-accent), var(--color-accent-dark));">📍</div>
        <div class="stat-content">
          <div class="stat-value">5</div>
          <div class="stat-label">Étapes</div>
        </div>
      </div>
      <div class="stat-item">
        <div class="stat-icon" style="background: linear-gradient(135deg, var(--color-success), #38a169);">📅</div>
        <div class="stat-content">
          <div class="stat-value">12</div>
          <div class="stat-label">Jours</div>
        </div>
      </div>
    </footer>
  </div>

  <script>
    let currentStep = 0;
    let isPlaying = false;
    let playbackInterval;

    function selectStep(stepCard, index) {
      // Update active step card
      document.querySelectorAll('.step-card').forEach(card => {
        card.classList.remove('active');
      });
      stepCard.classList.add('active');

      // Update active marker
      document.querySelectorAll('.map-marker').forEach((marker, i) => {
        marker.classList.toggle('active', i === index);
      });

      // Update progress
      currentStep = index;
      updateProgress();

      // Scroll step into view
      stepCard.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
    }

    function updateProgress() {
      const totalSteps = 5;
      const progress = ((currentStep + 1) / totalSteps) * 100;
      document.getElementById('progressBar').style.width = progress + '%';
      document.querySelector('.progress-label').textContent = 
        `Étape ${currentStep + 1} sur ${totalSteps}`;
    }

    function togglePlayback() {
      const btn = document.querySelector('.play-button');
      isPlaying = !isPlaying;

      if (isPlaying) {
        btn.textContent = '⏸';
        playbackInterval = setInterval(() => {
          currentStep = (currentStep + 1) % 5;
          const stepCard = document.querySelectorAll('.step-card')[currentStep];
          selectStep(stepCard, currentStep);
        }, 3000);
      } else {
        btn.textContent = '▶';
        clearInterval(playbackInterval);
      }
    }

    function seekTo(event) {
      const rect = event.currentTarget.getBoundingClientRect();
      const x = event.clientX - rect.left;
      const width = rect.width;
      const percentage = x / width;
      const newStep = Math.floor(percentage * 5);
      
      const stepCard = document.querySelectorAll('.step-card')[newStep];
      selectStep(stepCard, newStep);
    }

    // Filter chips
    document.querySelectorAll('.filter-chip').forEach(chip => {
      chip.addEventListener('click', () => {
        document.querySelector('.filter-chip.active').classList.remove('active');
        chip.classList.add('active');
      });
    });

    // Map markers click
    document.querySelectorAll('.map-marker').forEach((marker, index) => {
      marker.addEventListener('click', () => {
        const stepCard = document.querySelectorAll('.step-card')[index];
        selectStep(stepCard, index);
      });
    });
  </script>
</body>
</html>
